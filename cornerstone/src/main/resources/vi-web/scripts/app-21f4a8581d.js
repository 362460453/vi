function VIException(t,e){this.Message=t,this.Type=e}!function(){"use strict";angular.module("viModule",["ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr","smart-table","angular-loading-bar","nvd3","uiSwitch","angular-confirm","SmoothScrollbar"])}(),function(){"use strict";angular.module("viModule").controller("TraceController",["$element","$scope","serviceInfo","$stateParams",function(t,e,n,a){var o=this;n.getComponentInfo("vi.ignitestatus").then(function(t){switch(o.data=t,o.statusClass="status-running",o.formatMsg=function(t){return t.replace(/\r\n/g,"<br>")},o.colorMsg=function(t){return t.indexOf("[ERROR]")>=0?"status-failed":t.indexOf("[WARN]")>=0?"status-warn":void 0},t.status){case"Success":o.statusClass="status-normal";break;case"Failure":o.statusClass="status-failed"}nv.addGraph(function(){var e=nv.models.stepsChart();return e.currentIndex(t.currentPluginIndex).currentStatus(t.status),d3.select("#test-chart").datum(t.infos).call(e),nv.utils.windowResize(e.update),e})});var r=t[0].scrollWidth-30,s=d3.select("svg").append("g").attr("transform","translate(20,30)");s.append("line").style("stroke","#ccc").attr("x1",0).attr("y1",0).attr("x2",r-40).attr("y2",0)}])}(),d3.slider=function(){"use strict";function t(o){o.each(function(){e=d3.select(this).classed("d3slider",!0),c=parseInt(e.style("width"),10)-(b.left+b.right),a=a||m,s=d3.scale.linear().domain([m,h]).range([0,c]).clamp(!0),n=e.append("svg").attr("class","d3slider-axis").attr("width",c+b.left+b.right).attr("height",v+b.top+b.bottom).append("g").attr("transform","translate("+b.left+","+b.top+")"),n.append("rect").attr("class","d3slider-rect-range").attr("width",c).attr("height",f),w&&n.append("rect").attr("class","d3slider-rect-value").attr("width",s(a)).attr("height",f);var o=d3.svg.axis().scale(s).orient("bottom");0!==y?(o.ticks(y),o.tickSize(g)):r?(o.tickValues(r),o.tickSize(g)):(o.ticks(0),o.tickSize(0)),i&&o.tickFormat(i),n.append("g").attr("transform","translate(0,"+f+")").call(o);var u=[a];l=n.selectAll(".dragger").data(u).enter().append("g").attr("class","dragger").attr("transform",function(t){return"translate("+s(t)+")"});var p=null;p=i?i(a):d3.format(",.0f")(a),l.append("text").attr("x",0).attr("y",-15).attr("text-anchor","middle").attr("class","draggertext").text(p),l.append("circle").attr("class","dragger-outer").attr("r",8).attr("transform",function(t){return"translate(0,2)"});var C=d3.behavior.drag();C.on("drag",t.drag),C.on("dragend",function(){d&&d(t.value())}),l.call(C),n.on("click",t.click)})}var e,n,a,o,r,s,i,l,c,d,u,p,m=0,h=100,v=40,f=3,g=6,b={top:25,right:25,bottom:15,left:25},y=0,w=!1;return t.draggerTranslateFn=function(){return function(t){return"translate("+s(t)+")"}},t.click=function(){var e=d3.event.offsetX||d3.event.layerX;t.move(e),d&&d(t.value())},t.drag=function(){var e=d3.event.x;t.move(e+b.left)},t.move=function(t){var e,o,r=s.invert(t-b.left);void 0!==u?(e=u.reduce(function(t,e,n,a){return r>e?e:t}),o=u.indexOf(e)<u.length-1?u[u.indexOf(e)+1]:e,a=o-r>=r-e?e:o):a=r;var l=[a];n.selectAll(".dragger").data(l).attr("transform",function(t){return"translate("+s(t)+")"});var c=null;c=i?i(a):d3.format(",.0f")(a),n.selectAll(".dragger").select("text").text(c),w&&n.selectAll(".d3slider-rect-value").attr("width",s(a))},t.min=function(e){return arguments.length?(m=e,t):m},t.max=function(e){return arguments.length?(h=e,t):h},t.classPrefix=function(e){return arguments.length?(o=e,t):o},t.tickValues=function(e){return arguments.length?(r=e,t):r},t.ticks=function(e){return arguments.length?(y=e,t):y},t.stepValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(e){return arguments.length?(i=e,t):i},t.value=function(e){return arguments.length?(a=e,t):a},t.showRange=function(e){return arguments.length?(w=e,t):w},t.callback=function(e){return arguments.length?(d=e,t):d},t.setValue=function(e){var n=s(e)+b.left;t.move(n)},t.mousemove=function(){var e=d3.mouse(this)[0],n=t.getNearest(s.invert(e),u);p.attr("transform","translate("+s(n)+",0)"),p.selectAll("text").text(n)},t.getNearest=function(t,e){var n=e.reduce(function(e,n,a,o){return t>n?n:e}),o=e[e.indexOf(n)+1],r=o-a>=a-n?n:o;return r},t.destroy=function(){return e.selectAll("svg").remove(),t},t},function(){"use strict";function t(){function t(t,e,n,a,o,r){var s=this;t.isCollapse=!1,s.isLoadComponents=!1,s.subMenuHeight=e.innerHeight-130+"px",s.menuMaxHeight=e.innerHeight-170+"px";var i=function(){t.$apply(function(){s.subMenuHeight=e.innerHeight-130+"px",s.menuMaxHeight=e.innerHeight-170+"px"})};angular.element(e).on("resize",i),t.$on("$destroy",function(t){angular.element(e).off("resize",i)}),t.collapse=function(){t.isCollapse=!t.isCollapse,s.change({isCollapse:t.isCollapse})},s.hoverMenu=function(e,n){s.currentHover=e;var a=45,o=56;t.isCollapse?(s.subMenuLeft="48px",a=32,o=32):s.subMenuLeft="102px",n>0&&(a+=o*n),s.subMenuTop=a+"px"},o.getComponentMeta().then(function(t){t=r("orderBy")(t,"name"),l(t),a.components=t.map(function(t){var e="/component/"+("true"==t.custom?"custom":"detail")+"/"+t.id+"/"+t.name;return"true"==t.list&&"true"!=t.custom&&(e="/component/detail.list/"+t.id+"/"+t.name),{name:t.name,description:t.description,href:e}})});var l=function(e){if(!s.isLoadComponents&&(s.isLoadComponents=!0,t.menus)){var n=t.menus.findIndex(function(t){return"Component"===t.name});if(0>n)return;var a=t.menus[n];a.submenu=e.map(function(t){var e={};return e.id=t.id,e.name=t.name,{description:"("+t.description+")",name:t.name,state:("true"==t.custom?"Component-Custom(":"true"==t.list?"Component-DetailList(":"Component-Detail(")+JSON.stringify(e)+")"}})}};t.$on("$stateChangeStart",function(e,n,o,r){var s=n.name,i=function(t){return t.state==s};if("empty"==n.name)e.preventDefault();else for(var l=0;l<t.menus.length;l++){var c=t.menus[l];(c.state==s||c.submenu&&c.submenu.some(i))&&a.$broadcast("$menuChange",c)}}),t.$on("$stateChangeSuccess",function(e,n,a,o){for(var r=n.name,s=(o.name,function(t){return t.state==r}),i=0;i<t.menus.length;i++){var l=t.menus[i];if(l.state==r||l.submenu&&l.submenu.some(s))return void t.selemenu(l)}}),t.selemenu=function(e){isNaN(e)||(e=t.menus[0]),t.selectMenu&&(t.selectMenu.selected=!1),e.selected=!0,t.selectMenu=e},"undefined"!=typeof $SMENU?t.menus=$SMENU:t.menus=[{name:"Component",icon:"fa-codepen",state:"Component"},{name:"Metrics",icon:"fa-tachometer",state:"Dashboard"},{name:"Analyzer",icon:"fa-coffee",state:"empty",submenu:[{name:"Jar dependency",state:"Analyzer-Jardependency"},{name:"JVM Sampler",state:"Analyzer-JVMSampler"}]},{name:"Configuration",icon:"fa-cogs",state:"Configuration"},{name:"FC",icon:"fa-toggle-on",state:"FC"},{name:"Cache Refresh",icon:"fa-database",state:"Cache"},{name:"Thread dump",icon:"fa-camera",state:"ThreadDump"},{name:"File Log",icon:"fa-file",state:"Log"},{name:"Custom",icon:"fa-file-o",state:"fc"}],t.selemenu(0)}t.$inject=["$scope","$window","$location","$rootScope","serviceInfo","$filter"];var e={restrict:"E",templateUrl:"app/components/sidebar/sidebar.html",controller:t,controllerAs:"vm",scope:{change:"&onChange"},bindToController:!0};return e}angular.module("viModule").directive("acmeSidebar",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o,r,s){var i=this,l=e.get("hostInfo");i.loginUser=n.get("vi-user"),i.isOriginIp=!0,s.getHelp(function(t){i.links=t}),i.changeServer=function(){var t=a.open({animation:!0,templateUrl:"viserversmodal.html",controller:["$scope","$uibModalInstance","currentServer","enterpriseService",function(t,n,a,o){var r={};t.vm=r;e.get("poolServers");r.selectedIdc="all",r.idcs={all:"all"},r.idcFilter=function(t){return"all"==r.selectedIdc?!0:t.idc==r.selectedIdc},o.getServers(function(t){for(var n=0;n<t.length;n++){var a=t[n];a.idc in r.idcs||(r.idcs[a.idc]=a.idc)}r.servers=t,e.put("poolServers",r.servers),r.hasContent=!0}),r.hostIp=a.ip,t.ok=function(){var t=null;r.selectedRow&&(t=r.selectedRow),n.close(t)},t.cancel=function(){n.dismiss("cancel")}}],size:"lg",resolve:{currentServer:{ip:i.hostIp}}});i.returnOrigin=function(){var t=location.pathname.substring(0,location.pathname.length-10)+"api",n=e.get("hostInfo");o.setEndpoint({host:"http://"+n.IP,port:location.port,path:t}),i.hostName=n.HostName,i.hostIp=n.IP,i.isOriginIp=!0,r.reload()},t.result.then(function(t){if(!(location.pathname.length<10)){var n,a=e.get("hostInfo"),s=!1,l=location.port;location.pathname.replace(/\/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(:|\/)/g,function(e,n,a,o){return n?(s=!0,"/"+t.ip+a):void 0});if(s)n="/"+t.ip+":"+t.url+"/vi/api";else{var c=t.url.indexOf("/");c>0?(l=t.url.substr(0,c),n="/"+t.url.substr(c+1)+"/vi/api"):(l=t.url,n="/vi/api")}o.setEndpoint({host:"http://"+(s?location.hostname:t.ip),port:l,path:n}),i.hostName=t.name,i.hostIp=t.ip,i.isOriginIp=i.hostIp==a.IP,r.reload()}})},l?(i.hostName=l.HostName,i.hostIp=l.IP):(i.hostName=$CHOSTNAME,i.hostIp=$CIP),t.$on("hostInfo.ready",function(t){var n=e.get("hostInfo");i.hostName=n.HostName,i.hostIp=n.IP}),t.$on("appinfo.ready",function(t,e){i.appName=e.appName,i.appid=e.appid,i.appChineseName=e.appChineseName});var c;t.$on("$menuChange",function(t,e){c=e}),t.$on("$stateChangeSuccess",function(e,n,a){a.name?a.name:n.name;c&&(t.breadcrumbs=[c],c.state!=n.name&&t.breadcrumbs.push({name:a.name?a.name:n.name}))})}t.$inject=["$scope","SiteCache","$cookies","$uibModal","ApiService","$state","enterpriseService"];var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("viModule").directive("acmeNavbar",t)}(),function(){"use strict";angular.module("viModule").directive("pageSelect",function(){return{restrict:"E",template:'<input type="text" class="select-page" ng-model="inputPage" ng-change="selectPage(inputPage)">',link:function(t,e,n){t.$watch("currentPage",function(e){t.inputPage=e})}}})}(),function(){"use strict";function t(t){var e="Native method";return t.lineNumber>0&&(e=t.fileName+":"+t.lineNumber),t.declaringClass+"."+t.methodName+"("+e+")"}function e(e,n,a){e.close=function(){a.dismiss("cancel")},e.title=n.title,e.rawCollection=n.items,e.formatTrace=t,e.getStateTip=function(t){return(t.lockName?t.lockName+"上的":"")+t.threadState}}function n(n,a,o,r,s,i,l,c){function d(){i.getStats(function(t){p=new Date,u.currentThreadStats=t,u.threadData[0].values.shift(),u.threadData[0].values.push({y:t.currentThreadCount}),u.threadData[1].values.shift(),u.threadData[1].values.push({y:t.daemonThreadCount}),u.threadData[2].values.shift(),u.threadData[2].values.push({y:t.totalStartedThreadCount}),u.threadData[3].values.shift(),u.threadData[3].values.push({y:t.peakThreadCount});for(var e=0;60>e;e++)for(var n=0;n<u.threadData.length;n++)u.threadData[n].values[e].x=e;g=s(d,m)})}var u=this;u.showDiagram=!0,u.maxDepth=3;var p,m=3e3;u.threadDump=function(t){i.dump({maxDepth:u.maxDepth,onlyDeadLock:t||!1},function(n){if(null==n&&t)return void a.info("no dead lock thread found.");c.open({animation:!0,templateUrl:"threadModal.html",controller:e,size:"llg",resolve:{data:{items:n,title:t?"deadlock threads":"all threads"}}})})};var h=o.outerHeight-550;300>h&&(h=300),u.needHighlight=function(t){if(u.highlightWords){var e=u.highlightWords.split(/\s+/),n=new RegExp("("+e.join(")|(")+")","gi");return n.test(t)}return!1},u.fixedContainer={height:h+"px"},u.threadOptions={chart:{type:"lineChart",height:200,xAxis:{tickFormat:function(t){return d3.time.format("%H:%M:%S")(new Date(p-(60-t)*m))}},yAxis:{tickFormat:function(t){return t}},tickFormat:function(t){return t},useInteractiveGuideline:!0}},u.threadData=[{values:[],key:"current count",color:"#2ca02c"},{values:[],key:"daemon count",color:"#ff7f0e"},{values:[],key:"total started count",disabled:!0,color:"#0066cc"},{values:[],key:"peak count",color:"#99cc00"}],u.threadInfo={},u.collapse=function(){u.showDiagram=!u.showDiagram},u.selectedItem=null,u.select=function(t){u.selectedItem&&(u.selectedItem.selected=!1),t.selected=!0,u.selectedItem=t,i.getDetail(t.id,{maxDepth:100},function(t){u.threadInfo=t})},u.formatTrace=t,u.refreshThreads=function(){u.totalCpu=0,u.threads=[],i.getAll(function(t){u.threads=t,u.totalCpu=t.reduce(function(t,e){return isNaN(t)?t.cpuTime+e.cpuTime:t+e.cpuTime})})},u.refreshThreads();for(var v=(u.threadData[0].values,u.threadData[1].values,0);60>v;v++)for(var f=0;f<u.threadData.length;f++)u.threadData[f].values.push({x:v,y:0});var g;d(),n.$on("$destroy",function(t){s.cancel(g)})}n.$inject=["$scope","toastr","$window","$element","$timeout","threadService","SiteCache","$uibModal"],e.$inject=["$scope","data","$uibModalInstance"],angular.module("viModule").controller("ThreadDumpController",n)}(),function(){"use strict";function t(t,e,n){e.values.sort(function(t,e){return e.value-t.value}),t.chartData=e.values.slice(0,e.values.length>10?10:e.values.length).map(function(t){return{key:t.label,y:t.value}}),t.chartOptions={chart:{type:"pieChart",height:500,x:function(t){return t.key},y:function(t){return t.y},showLabels:!0,duration:500,labelThreshold:.01,labelSunbeamLayout:!0,legend:{margin:{top:5,right:35,bottom:5,left:0}}}},angular.merge(t,e),t.close=function(){n.dismiss("cancel")}}function e(e,n,a,o,r,s,i,l,c,d){var u=this,p="",m={};u.seleTags={},u.tags=[];var h=a.size,v=Math.ceil(h/1024/1024),f=d3.range(1,v+1,1),g=-1,b=i[0].offsetWidth-60,y=d3.slider().min(1).max(v).tickValues([0,Math.ceil(v/2),v]).stepValues(f).tickFormat(function(t){return t+"MB"});y.callback(function(t){t!=g&&(g=t,u.loadingComplete=!1,m={},u.seleTags={},u.tags=[],u.showFilter=!1,u.isInFilter=!1,u.onBottom=null,x(t))}),y.value(v);var w=30*v;d3.select(".partion-selector").style("width",(w>b?b:w)+"px").call(y);var C=d3.select(i[0]).select(".log-detail>.log-list").on("click",function(){e.$apply(function(){u.showFilter=!1})}),k=/(\[\s*([^\]\s]{2,80})\s*\])|(\d{4}-\d{2}-\d{2}\s\d{2}\:\d{2}\:\d{2}\.\d{3})/g,x=function(t){u.foundCount=0,I=0,u.keyword="",u.currentMatches=null,o.getDetail(a.name,{encoding:n.search().encoding||"",partitionIndex:t},function(t){var e=!0,n="normal",a=0;u.lineData={},C.html(("\n"+t).replace(/\n([^\n]*)(?=\n)/g,function(t,o,r,s){var i=(o.length,!1),l=[];u.lineData[a]=[],u.lineData[a].push(l),o=o.replace(k,function(t,e,o,r,s){if(!o)return u.lineData[a].push(Date.parse(r)),(!u.minDate||u.minDate>u.lineData[a][1])&&(u.minDate=u.lineData[a][1]),(!u.maxDate||u.maxDate<u.lineData[a][1])&&(u.maxDate=u.lineData[a][1]),r;var c="["+o+"]";return 0===s&&(n=o,i=!0),l.push(o),o in m?m[o]++:(u.seleTags[o]=!1,m[o]=1),c});0===o.length&&(o="\n");var c='<div class="line" num="'+a++ +'">'+o+"</div>",d='<div class="area '+n+'"><div class="more">...</div><span class="tools"><span class="btn show-relate"><i class="fa fa-angle-double-up"></i><i class="fa fa-angle-double-down"></i></span></span>';return e?(e=!1,d+c):i?'<div class="more">...</div></div>'+d+c:c})+"</div>"),u.loadingComplete=!0,C.selectAll("div.area>.more:first-child").on("click",function(){d3.select(this.parentElement.previousElementSibling).attr("show","show").attr("all","all").select(".more:last-child").attr("hide","hide"),d3.select(this).attr("hide","hide")}),C.selectAll("div.area>.tools").on("click",function(){var t=d3.select(this.parentElement);"all"==t.attr("all")?t.attr("all",null):t.attr("all","all")}),C.selectAll("div.area>.more:last-child").on("click",function(){d3.select(this.parentElement.nextElementSibling).attr("show","show").attr("all","all").select(".more:first-child").attr("hide","hide"),d3.select(this).attr("hide","hide")});for(var o in m)u.tags.push({key:o,count:m[o]})})};u.loadingComplete=!1,x(-1);var $={},I=0;u.getHighlightRegex=function(){var t=0!==p.length,e=[];u.tagRegex&&e.push(u.tagRegex),t&&e.push("("+(u.inRegexMode?p:RegExp.escape(p))+")");var n=new RegExp(e.join("|"),"ig");return n};var M=[];u.filterTag=function(t){$={},u.foundCount=0,u.currentMatches=null;var e=u.seleTags[t],n=0!==p.length;return e?(u.showFilter=!1,I++):I--,M=u.tags.filter(function(t){return u.seleTags[t.key]}),u.loadingComplete=!1,u.isInFilter=!0,0!==I||n?0>=I?(delete u.tagRegex,void u.search()):(u.tagRegex=u.getFilterTags().map(function(t){return"("+t.key+")"}).join("|"),C.selectAll(".area").attr("all",null),C.selectAll(".line").each(function(a,o){var r=d3.select(this);this.tagCount=this.tagCount||0;var s,i=u.lineData[o][0].some(function(e){return e==t});i&&(e?(this.tagCount++,r.attr("show","show")):this.tagCount--,r.html(r.text().replace(u.getHighlightRegex(),function(t){return'<span class="highlight">'+t+"</span>"}))),s=this.tagCount<=0?null:d3.select(this).attr("show"),s=n&&!this.containWord?null:s;var l=d3.select(this.parentElement);r.attr("show",s),"show"==s?l.attr("show","show"):0===l.select(".line[show]").size()&&l.attr("show",null)}),void(u.loadingComplete=!0)):(delete u.tagRegex,void u.clearFilter())},u.clearFilter=function(){u.loadingComplete=!1,u.showFilter=!1,u.isInFilter=!1,I=0,u.keyword="",p="",C.selectAll(".area").attr("all",null),C.selectAll(".area").attr("show",null),C.selectAll(".line").attr("show",function(){return this.tagCount=0,delete this.containWord,null}),C.selectAll(".more").attr("hide",null);for(var t in u.seleTags)u.seleTags[t]=!1;u.loadingComplete=!0},u.getFilterTags=function(){return M};var S;u.asyncSearch=function(){u.inRegexMode||(null!==S&&d.cancel(S),u.keyword!=p&&(S=d(function(){u.search(!0)},250)))},u.reset=function(){u.keyword="",u.foundCount=0,u.currentMatches=null,u.search()},u.upDown=function(){u.onBottom?n.hash("vi-log-top"):n.hash("vi-log-bottom"),u.onBottom=!u.onBottom},u.showSearchStat=function(){var e=[];for(var n in u.currentMatches)e.push({label:n,value:u.currentMatches[n]});l.open({animation:!0,templateUrl:"log-detail-stat",controller:t,size:"llg",resolve:{data:{values:e,title:"Search result statistics - "+u.keyword}}})},u.search=function(t){if(!u.inRegexMode||!t){if(0===I&&0===u.keyword.length)return void u.clearFilter();var e=u.keyword;try{e=!t&&u.inRegexMode?new RegExp(e,"gi"):new RegExp(RegExp.escape(e),"gi")}catch(n){return void c.error(n.message,"搜索条件有误")}C.selectAll(".area").attr("all",null),u.loadingComplete=!1,u.isInFilter=!0,u.foundCount=0,u.currentMatches={},p=u.keyword;var a=0!==p.length;C.selectAll(".line").each(function(){var t=d3.select(this),n=null;I>0&&(n=this.tagCount>0?"show":null);var o=t.text();if(a){if(0===I||"show"==n){var r=o.match(e)||[];0!==r.length?(angular.forEach(r,function(t){t in u.currentMatches?u.currentMatches[t]++:u.currentMatches[t]=1}),u.foundCount++,this.containWord=e,n="show"):(this.containWord=!1,n=null)}}else u.currentMatches=null,delete this.containWord;t.html(o.replace(u.getHighlightRegex(),function(t){return'<span class="highlight">'+t+"</span>"})),t.attr("show",n);var s=d3.select(this.parentElement);"show"==n?s.attr("show","show"):0===s.select(".line[show]").size()&&s.attr("show",null)}),u.loadingComplete=!0}}}t.$inject=["$scope","data","$uibModalInstance"],e.$inject=["$scope","$location","$stateParams","logInfo","$sce","SiteCache","$element","$uibModal","toastr","$timeout"],angular.module("viModule").controller("LogDetailController",e)}(),function(){"use strict";function t(t,e,n){var a=this;a.download=function(t){e.download(t)},e.getAll(function(t){a.rawLogs=t.map(function(t){return{name:t.name,modifiedTime:new Date(t.modifiedTime),size:t.size,href:"log/detail/"+t.name+"/"+t.size}})})}t.$inject=["$scope","logInfo","SiteCache"],angular.module("viModule").controller("LogController",t)}(),function(){"use strict";angular.module("viModule").controller("DashboardController",["$document","$element","$scope","metricsService","$timeout","toastr",function(t,e,n,a,o,r){function s(){a.getCurrent(i,function(t){if(t instanceof VIException)return void r.error(t.Message,"error");for(var e,e=0,n=l.selectedNames.length,a=0;n>e;e++,a++){var i,u,m=l.selectedNames[e],f=l.chartData[e],g=0,b=0,y=[];if(t&&t[m]){var w=t[m];g=w.count,i=(w.total/w.count).toFixed(2)-0,u=w.max,b=w.min,y=w.percentileValues}if(f.values.push({x:h,y:g}),m.length>5&&"##"==m.substr(-2,2))a--;else{var C=l.chartCostData[3*a];angular.forEach(c,function(t,e){l.chartCostData[3*a+e+1].values.push({x:h,y:y[e]})});var k=l.chartCostData[3*a+1+c.length],x=l.chartCostData[3*a+2+c.length];if(C.values.push({x:h,y:i}),k.values.push({x:h,y:u}),x.values.push({x:h,y:b}),f.values.length>v){var $=v/2;f.values.splice(0,$),C.values.splice(0,$),k.values.splice(0,$),x.values.splice(0,$),angular.forEach(c,function(t,e){l.chartCostData[3*a+e+1].values.splice(0,$)})}}}h++,l.nowDate=d3.time.format("%Y-%m-%d %H:%M:%S")(new Date),1==h?s():d=o(s,p)})}var i,l=this;l.metrics=[],l.onKeyDown=function(t){if(l.isOpen||38!=t.keyCode&&40!=t.keyCode||(l.isOpen=!0),l.isOpen){var e=l.list.length;switch(t.keyCode){case 13:l.isOpen=!1,l.selectName(l.list[l.selectedIndex]);break;case 38:l.selectedIndex?(l.selectedIndex--,l.selectedIndex<=0&&(l.selectedIndex=0)):l.selectedIndex=e-1;break;case 40:console.log(l.selectedIndex),l.selectedIndex>=0?(l.selectedIndex++,l.selectedIndex>=e&&(l.selectedIndex=0)):l.selectedIndex=0}}},l.toggled=function(){l.isOpen&&a.getNames(function(t){l.metrics=t}),l.isOpen=!0};l.chartData=[],l.chartCostData=[];var c=[];l.monitor=function(){if(l.enablePercentile&&0==c.length?(c=[99.9,95],i=null):!l.enablePercentile&&c.length>0&&(c=[],i=null),0==l.selectedNames.length)return void r.warning("you must select metrics first!","warning");var t={names:l.selectedNames,percentiles:c};i&&(t.id=i),a.register(t,function(t){if(t instanceof VIException)return r.error(t.Message,"register failed"),!1;i=t,u=new Date,d&&o.cancel(d),l.chartData=[],l.chartCostData=[],h=0;for(var e=0,e=0;e<l.selectedNames.length;e++){var n=l.selectedNames[e];l.chartData.push({values:[],key:n+".count",color:m[e]}),n.length>5&&"##"==n.substr(-2,2)||(l.chartCostData.push({values:[],key:n+".average",color:m[e]}),angular.forEach(c,function(t){l.chartCostData.push({values:[],key:n+"."+t+"Line",color:m[e]})}),l.chartCostData.push({values:[],key:n+".max",disabled:!0,color:m[e]}),l.chartCostData.push({values:[],key:n+".min",disabled:!0,color:m[e]}))}s()})},l.selectedNames=[],l.selectName=function(t){return l.selectedNames.length>4?void r.warning("max metrics count is 5!"):void(l.selectedNames.indexOf(t)<0?l.selectedNames.push(t):r.warning("already exist!"))},l.removeName=function(t){VIUtil.removeArrayItem(l.selectedNames,t)};var d,u,p=1e3;l.startDate=d3.time.format("%Y-%m-%d %H:%M:%S")(new Date),l.chartOptions=l.chartCostOptions={chart:{type:"lineWithFocusChart",height:250,forceX:[100],forceY:[5],noData:"",xAxis:{tickFormat:function(t){return d3.time.format("%H:%M:%S")(new Date(u-0+t*p))}},x2Axis:{tickFormat:function(t){return d3.time.format("%H:%M:%S")(new Date(u-0+t*p))}},yAxis:{tickFormat:function(t){return VIUtil.formatNumber(t)}},tickFormat:function(t){return t},useInteractiveGuideline:!0}};var m=d3.scale.category20().range(),h=0,v=1800;n.$on("$destroy",function(t){o.cancel(d)})}])}(),function(){"use strict";function t(t,e,n,a){t.fcs=a.items,t.ok=function(){for(var a={},o=0;o<t.fcs.length;o++){var r=t.fcs[o];a[r.key]=r.value}e.update(a,function(t){n.close(t)})},t.cancel=function(){n.dismiss("cancel")}}function e(e,n,a,o,r){var s=this;s.hasAuthority=!0,s.fcCollection=[],a.getAll(function(t,e){(e&o.ALL)!=o.ALL&&(e&o.EDIT)!=o.EDIT&&(s.hasAuthority=!1);for(var n in t){var a=t[n][0],r=t[n][1];s.fcCollection.push({key:n,value:a,old:a,remark:r})}}),s.displayCollection=[],s.fcNames=["all","appsettings","centralfc"],s.selectedFC="all",s.fcFilter=function(t){return"all"==s.selectedFC?!0:t.belongFC==s.selectedFC},s.openModal=function(){var e=s.fcCollection.filter(function(t){return t.old!=t.value}),a=n.open({animation:!0,templateUrl:"fcModal.html",controller:t,size:"lg",resolve:{modifiedItems:{items:e}}});a.result.then(function(t){if(t instanceof VIException)return r.error(t.Message,"submit failed!"),!1;r.success("submit success!");for(var e=0;e<s.fcCollection.length;e++){var n=s.fcCollection[e];n.old=n.value}},function(){})},e.$on("$stateChangeStart",function(t){var e=s.fcCollection.findIndex(function(t){return t.old!=t.value});e>=0&&(confirm("有未保存的改动，确认离开页面吗？")||t.preventDefault())})}e.$inject=["$scope","$uibModal","fcService","Permission","toastr"],t.$inject=["$scope","fcService","$uibModalInstance","modifiedItems"],angular.module("viModule").controller("FCController",e)}(),function(){"use strict";function t(t,e,n,a,o){t.configs=a.items,t.ok=function(){for(var a={},r=0;r<t.configs.length;r++){var s=t.configs[r];a[s.key]=s.value}e.update(a,function(t){o.success("submit success!"),n.close(!0)})},t.cancel=function(){n.dismiss("cancel")}}function e(e,n,a){var o=this;o.configCollection=[],o.configGroups=[{name:"all",value:"all"}],n.getAll(function(t){for(var e in t){var n="#"==e;o.configGroups.push({name:n?"[readonly]":e,value:e});for(var a in t[e])o.configCollection.push({key:n?a.substr(2):a,old:t[e][a],value:t[e][a],readOnly:n,belongConfig:e})}}),n.getRemarks(function(t){for(var e in t){var n=o.configCollection.filter(function(t){return t.key==e});n.length>0&&(n[0].description=t[e])}}),o.selectedConfig="all",o.configFilter=function(t){return"all"==o.selectedConfig?!0:t.belongConfig==o.selectedConfig},o.openModal=function(e){var n=o.configCollection.filter(function(t){return t.old!=t.value}),r=a.open({animation:!0,templateUrl:"configModal.html",controller:t,size:"lg",resolve:{modifiedItems:{items:n}}});r.result.then(function(t){if(t)for(var e=0;e<o.configCollection.length;e++){var n=o.configCollection[e];n.old=n.value}},function(){})},e.$on("$stateChangeStart",function(t){var e=o.configCollection.findIndex(function(t){return t.old!=t.value});e>=0&&(confirm("有未保存的改动，确认离开页面吗？")||t.preventDefault())})}e.$inject=["$scope","configService","$uibModal"],t.$inject=["$scope","configService","$uibModalInstance","modifiedItems","toastr"],angular.module("viModule").controller("ConfigController",e)}(),function(){"use strict";angular.module("viModule").controller("JvmSamplerController",["analyzerService","$compile","$scope","$timeout",function(t,e,n,a){function o(t){if("#"==t[0]){for(var e=1,n=1;n<t.length&&"#"==t[n];n++)e++;if(t.length==e+1)return c[t[e]]+"[]".repeat(e);if("L"==t[e])return t.substr(e+1,t.length-e-2)+"[ ]".repeat(e)}return t}function r(){t.getHeapHisto(function(t){if(--d>0&&(null==t||t.length<10))s=a(r,l);else{var e=0,n=0;i.rawList=t.map(function(t){return e+=t[2],n+=t[1],{"class":o(t[0]),count:t[1],bytes:t[2]}}),i.totalSize=VIUtil.formatBytes(e),i.totalCount=n}})}var s,i=this,l=1e3,c={B:"byte",C:"char",D:"double",F:"float",I:"int",J:"long",S:"short",Z:"boolean"},d=3;r(),n.$on("$destroy",function(t){a.cancel(s)})}])}(),function(){"use strict";angular.module("viModule").controller("JardepsController",["$element","$compile","$scope","analyzerService","$timeout",function(t,e,n,a,o){var r=this;r.type="net",r.seleNormal=r.seleStart=r.seleLow=r.seleMany=!0,r.showRow=function(t){switch(t.type){case"normal":return r.seleNormal;case"start":return r.seleStart;case"low":return r.seleLow;case"many":return r.seleMany;default:return!0}},r.normalCount=0,r.lowCount=0,r.manyCount=0,n.$watch("vm.type",function(t){"tree"==r.type?d.style("display","none").style("cursor",""):d.style("display","").style("cursor","move")});var s=t[0].scrollWidth-20;t[0].style.overflow="hidden";var i,l=document.documentElement,c=(l.scrollHeight>l.clientHeight?l.scrollHeight:l.clientHeight)-140,d=(d3.scale.category20(),d3.select(t[0]).append("svg")),u=d.attr("class","overlay").attr("width",s).attr("height",c).attr("pointer-events","all").style("cursor","move").call(d3.behavior.zoom().on("zoom",function(){u.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")})).append("g"),p=u.append("defs"),m=p.append("marker").attr("id","arrow").attr("class","arrow").attr("markerUnits","strokeWidth").attr("markerWidth","39").attr("markerHeight","39").attr("viewBox","0 0 30 30").attr("refX","20").attr("refY","6").attr("orient","auto"),h="M2,2 L10,6 L2,10 L6,6 L2,2";m.append("path").attr("d",h).attr("fill","#60b3e0"),a.getDeps(function(t){function e(t){var e;if(t&&null!==(e=t.match(/\d+\.\d+\.\d+|\d+\.\d+/g))){var n=e.shift().split("."),a=0;2==n.length&&n.push(0);for(var o=0;o<n.length;o++)a+=(n[o]-0)*Math.pow(1e4,2-o);return a}}function a(t,e,n){for(var a=0;a<t.length;a++){var o=t[a].data;if(o.artifactId==e.artifactId&&o.groupId==e.groupId)return o.targets.push({groupId:n.data.groupId,artifactId:n.data.artifactId,scope:n.data.scope,version:n.data.version,needVersion:e.version}),a}return-1}r.data=t;for(var o={nodes:[],links:[]},l=0;l<t.length;l++){var d=t[l];d.fullName=d.groupId+":"+d.artifactId+":"+d.version,d.targets=[],o.nodes.push({name:d.artifactId+"("+d.version+")",group:l+1,data:d})}angular.forEach(o.nodes,function(t,e){angular.forEach(t.data.dependencies,function(n){var r=a(o.nodes,n,t);r>=0&&o.links.push({source:e,target:r,value:1})})});var p=d3.layout.force().nodes(o.nodes).links(o.links).size([s,c]).linkDistance(120).charge(-340).gravity(.03).start(),m=p.drag().on("dragstart",function(t){d3.event.sourceEvent.stopPropagation()}),h=u.selectAll(".link").data(o.links).enter().append("line").attr("class","link").style("stroke-width",function(t){return 1}).attr("marker-end","url(#arrow)"),v=u.selectAll(".node").data(o.nodes).enter().append("g").attr("class","node").call(m);i=v,v.on("mouseover",function(t){u.style("cursor","pointer"),n.$apply(function(){r.seleNode=t.data});var e=[];e.push(t.index),h.attr("class",function(n){return n.target.index==t.index&&e.push(n.source.index),n.source.index==t.index&&e.push(n.target.index),n.target.index==t.index||n.source.index==t.index?"link":(d3.select(this).attr("marker-end",null),"nonsele-link")}),v.attr("class",function(t){return e.indexOf(t.index)>=0?"node":"nonsele-node"})}).on("mouseout",function(){v.attr("class","node"),u.style("cursor","move"),h.attr("class","link").attr("marker-end","url(#arrow)")}),v.append("circle").attr("r",15).style("fill",function(t){var n="#ccff33";if(0==t.index)n="orange",t.data.type="start";else{var a=e(t.data.version),o=t.data.targets.map(function(t){return e(t.needVersion)});o.push(a),o=o.filter(function(t,e,n){return n.indexOf(t)===e&&t}).sort(),o.length>0&&(a!=o[o.length-1]?n="#d15b47":o.length>1&&(n="#ffff00"))}switch(n){case"#ccff33":r.normalCount++,t.data.type="normal";break;case"#d15b47":t.data.type="low",r.lowCount++;break;case"#ffff00":t.data.type="many",r.manyCount++}return n}),v.append("text").text(function(t){return t.name}),p.on("tick",function(){h.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),v.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})})}),r.keywordChange=function(){i.attr("keyword",function(t){return r.keyword.length>0&&t.name.indexOf(r.keyword)>=0?!0:null})}}])}(),function(){"use strict";angular.module("viModule").controller("ComponentDetailListController",["$stateParams","SiteCache","serviceInfo","toastr",function(t,e,n,a){var o=t.id,r=this;r.rowCollection=[],r.colCollection=[],r.componentName=t.name,r.hasMeta=!1,r.colCount=3,r.total={},r.getTotal=function(t,e){if(t in r.total)switch(e){case"Bytes":return VIUtil.formatBytes(r.total[t]);case"Number":return VIUtil.formatNumber(r.total[t])}return""},n.doComponentMethod(t.id,"list").then(function(t){if(!(t.length<=0)){var n=e.get("fieldMeta"),a=n.filter(function(t){return 0===t.id.indexOf(o)});r.colCount=a.length;for(var s=Math.floor(100/a.length),i=0;i<a.length;i++){var l=a[i],c="*";0!==i&&(c=s+"%");var d=function(t){return t},u=l.name,p=l.id.substr(l.id.lastIndexOf(".")+1).toLowerCase(),m=l.description;switch(l.type){case"Bytes":r.total[p]=0,r.hasTotal=!0,d=VIUtil.formatBytes;break;case"Number":r.hasTotal=!0,r.total[p]=0,d=VIUtil.formatNumber}r.colCollection.push({name:u,field:p,type:l.type,width:c,description:m,formatFn:d})}for(i=0;i<t.length;i++){var h=t[i];for(var v in h){var f=v.toLowerCase();/[A-Z]/.test(v)&&(h[f]=h[v],delete h[v]),f in r.total&&(r.total[f]+=h[f]);
}}r.rowCollection=t}})}])}(),function(){"use strict";angular.module("viModule").controller("ComponentDetailController",["$stateParams","SiteCache","serviceInfo","$scope","ApiService",function(t,e,n,a,o){var r=t.id,s=r,i=this;i.rowCollection=[],i.componentName=t.name,i.hasMeta=!1;var l=e.get("fieldMeta"),c=function(){n.getComponentInfo(r).then(function(t){for(var e=l.filter(function(t){return 0==t.id.search(s.replace(".","\\.")+"\\.[^\\.]+$")}),n=0;n<e.length;n++){var r=e[n],c=r.id.replace(s,"").substr(1);if(c in t){var d={name:r.name,fname:c,value:t[c],description:r.description},u=/@{[^{]*}/g,p=d.description.match(u);if(null!=p&&p.length>0&&(d.description=d.description.replace(u,""),angular.merge(d,a.$eval(p[0].substr(1)))),d.isLink)d.value='<a target="_blank" href="'+o.getAbsoluteUrl("/download/config/"+d.value)+'">查看</a>';else if(r)switch(i.hasMeta=!0,r.type){case"Bytes":d.value=VIUtil.formatBytes(d.value);break;case"Number":d.value=VIUtil.formatNumber(d.value)}i.rowCollection.push(d)}}if(0==i.rowCollection.length)for(var m in t)i.rowCollection.push({name:m,value:t[m]})})};l.filter?c():a.$on("fieldMeta",function(t,e){l=e,c()})}])}(),function(){"use strict";function t(t,e,n,a,o,r,s,i,l,c,d){function u(){n.getComponentInfo("vi.appinfo").then(function(t){if(t){g=t.upTime,t.upTime=VIUtil.calculateRunTime(t.upTime),p.buildInfo=v(t,"vi.appinfo");for(var a=0;a<p.buildInfo.length;a++)if("upTime"==p.buildInfo[a].fname){f=p.buildInfo[a];break}var r=l.get("vi-user");m=r.length>2&&r==t.appOwner,o.$broadcast("appinfo.ready",t),("Uninitiated"==t.appStatus||"Initiating"==t.appStatus)&&n.loopWithPeriod(e,"vi.appinfo",2500,function(t){for(var e in t)angular.forEach(p.buildInfo,function(n){n.fname==e&&(n.value=t[e])});return"Uninitiated"==t.appStatus||"Initiating"==t.appStatus},"appStatus,latestNews")}}),n.getHostInfo().then(function(t){a.put("hostInfo",t),p.sysInfo=v(t,"vi.hostinfo");var o=2500;p.timer=n.loopWithPeriod(e,"vi.hostinfo",o,function(t){for(var e in t)angular.forEach(p.sysInfo,function(n){n.fname==e&&(n.value=t[e],p.sysInfoPretreatment(n))});return f&&(g+=o,f.value=VIUtil.calculateRunTime(g)),!0},"systemCpuLoad,availableMem,PhysicalMemoryAvaliable,DiskAvaliable,openFileDescriptorCount,cpuLoadAverages")})}var p=this,m=!1;p.isPause=!1,p.circleClass="fa-circle",p.buildInfo=[];var h=a.get("fieldMeta");null==h||null==h.filter?n.getComponentFieldMeta().then(function(t){h=t,u()}):u(),p.changeCircle=function(){p.isPause=!p.isPause,p.timer&&(p.isPause?(p.timer.pause(),p.timerPauseTime=new Date):(g+=new Date-p.timerPauseTime,p.timer.resume())),p.circleClass=p.isPause?"fa-pause-circle":"fa-circle"};var v=function(t,n){var a=[];"vi.hostinfo"==n&&(a.push({name:"Host",value:t.HostName+"/"+t.IP}),delete t.HostName,delete t.IP);for(var o=h.filter(function(t){return 0==t.id.search(n.replace(".","\\.")+"\\.[^\\.]+$")}),r=0;r<o.length;r++){var s=o[r],i=s.id.replace(n,"").substr(1);if(i in t){if("vi.hostinfo"===n&&"serverXml"===i&&!t[i])continue;var l={name:s.name,fname:i,value:t[i],description:s.description},d=/@{[^{]*}/g,u=l.description.match(d);null!==u&&u.length>0&&(l.description=l.description.replace(d,""),angular.merge(l,e.$eval(u[0].substr(1)))),l.isLink&&(l.html='<a target="_blank" href="'+c.getAbsoluteUrl("/download/config/"+l.value)+'">查看</a>',l.value=""),"vi.hostinfo"==n&&p.sysInfoPretreatment(l),a.push(l)}}return a};p.changeStatus=function(t){var e="markUp";"Initiated"==t.value&&(e="markDown");var n=r({text:"Are you sure to ["+e+"] this Application?"});n.then(function(){s[e](function(n){return n instanceof VIException?(i.error(n.Message,"submit failed!"),!1):void("markDown"==e?t.value="MarkDown":t.value="Initiated")})})},p.sysInfoPretreatment=function(t){var e=a.get("hostInfo");switch(t.fname){case"PhysicalMemoryAvaliable":var n=t.value,o=e.PhysicalMemoryTotal;t.value=VIUtil.formatBytes(t.value,"M"),t.cssClass=.3>n/o?"data-warn":"data-normal";break;case"PhysicalMemoryTotal":t.value=VIUtil.formatBytes(t.value,"M");break;case"availableMem":if(t.value>0){var o=e.PhysicalMemoryTotal;t.value=VIUtil.formatBytes(t.value,"M"),t.cssClass=t.value/o<.3?"data-warn":"data-normal"}else t.value="N/A";break;case"DiskAvaliable":var o=e.DiskTotal;t.value=VIUtil.formatBytes(t.value),t.cssClass=t.value/o<.3?"data-warn":"data-normal";break;case"DiskTotal":t.value=VIUtil.formatBytes(t.value);break;case"systemCpuLoad":t.cssClass=t.value>.5?"data-warn":"data-normal",t.value=(100*t.value).toFixed(2)+"%";break;case"openFileDescriptorCount":if(!(t.value>0))return t.value="N/A","";var n=t.value,o=e.maxFileDescriptorCount;t.cssClass=n/o>.3?"data-warn":"data-normal";case"maxFileDescriptorCount":t.value<0&&(t.value="N/A")}},p.getValHtml=function(t){var e="";switch(t.fname){case"appStatus":var n="";switch(t.value){case"Uninitiated":case"Initiating":n="status-running";break;case"Initiated":n="status-normal";break;case"InitiatedFailed":n="status-failed";break;case"MarkDown":n="status-warn"}var a="Initiated"==t.value?"Active":"InActive("+t.value+")";if(e='<a href="#/component/custom/vi.ignitestatus/ignite status" class="'+n+' mylink">'+a,"status-running"==n)e+='<i class="fa fa-spinner fa-pulse fa-fw"></i>';else if(m&&("Initiated"==t.value||"MarkDown"==t.value))return e=e+'</a><button style="margin-left:20px" class="btn btn-primary" type="button" ng-click="vm.changeStatus(info)">'+("Initiated"==t.value?"Mark down":"Mark up")+"</button>";e+="</a>";break;case"webInfo":e='<a href="'+c.getAbsoluteUrl("/download/config/root_web.xml")+'" target="_blank">查看</a>';break;case"statusSourceNames":t.value instanceof Array&&(t.value=t.value.join(" , ")),e='{{info.value.length>60 && !info.showAll?info.value.substr(0,59)+"...":info.value}}<span ng-click="info.showAll = !info.showAll" class="link" ng-show="info.value.length>60">{{info.showAll?"less":"more"}}</span>';break;default:e=t.value}return t.link&&t.linkTxt&&(e+='<a href="'+t.link+'" target="_blank">  '+t.linkTxt+"</a>"),e},p.rawComponents=null,o.$watch("components",function(){null===p.rawComponents&&o.components&&(p.rawComponents=o.components)});var f,g}t.$inject=["$element","$scope","serviceInfo","SiteCache","$rootScope","$confirm","appService","toastr","$cookies","ApiService","$filter"],angular.module("viModule").controller("ComponentController",t)}(),function(){"use strict";angular.module("viModule").directive("stStickyHeader",["$window",function(t){return{require:"^?stTable",link:function(e,n,a,o){var r=lrStickyHeader(n[0],{headerHeight:a.stStickyHeaderTop});e.$on("$destroy",function(){r.clean()}),e.$watch(function(){return o.tableState()},function(){t.scrollTo(0,lrStickyHeader.treshold)},!0)}}}]).directive("searchWatchModel",function(){return{require:"^stTable",scope:{searchWatchModel:"="},link:function(t,e,n,a){t.$watch("searchWatchModel",function(t){t?a.search(t):(a.tableState().search.predicateObject=null,a.tableState().pagination.start=0,a.pipe())})}}})}(),function(){"use strict";angular.module("viModule").directive("onComplete",["$timeout",function(t){return{restrict:"A",link:function(e,n,a){e.$last===!0&&t(function(){var t=e.$eval(a.onComplete);t(n,e)})}}}])}(),nv.models.stepsChart=function(){"use strict";function t(s){return c.reset(),s.each(function(s){function i(){return l==h-1?m-60:v*l}function c(t,n){var a="lightgreen";return"Success"==e?"green":("Failure"==e&&(a="red"),n>l?"#eee":n==l?a:"green")}function d(t,e,n){var a=p.selectAll("g").data(t).enter().append("g").attr("class","step").attr("transform",function(t,a){var o=a*n;return a==e-1&&(o=m-60),"translate("+o+",0)"}).on("mouseover",function(t){r.data({id:t.id,name:t.className,before:t.before,after:t.after,series:{}}).hidden(!1)}).on("mouseout",function(t){r.hidden(!0)});a.append("circle").attr("r",8).style("stroke","#ddd").style("stroke-width","2px").style("fill",c),a.append("text").style("text-anchor","middle").attr("y",function(t,n){return n%2==0||10>e?25:35}).text(function(t){return t.id})}var u=d3.select(this),p=u.append("g").attr("class","nv-stepsChart").attr("transform","translate(30,30)");nv.utils.initSVG(u);var m=nv.utils.availableWidth(a,u,n);nv.utils.availableHeight(o,u,n);t.update=function(){u.selectAll("*").remove(),u.transition().call(t)},t.updateStatus=function(t,n){l=t,e=n,u.selectAll("circle").style("fill",c),u.select("line.steps-progress").attr("x2",i)},t.container=this,p.append("line").style("stroke","#ccc").attr("x1",0).attr("y1",0).attr("x2",m-60).attr("y2",0);var h=s.length,v=m/(h-1);p.append("line").attr("class","steps-progress").style("stroke","#555").attr("x1",0).attr("y1",0).attr("x2",i).attr("y2",0),d(s,h,v)}),c.renderEnd("steps chart immediate"),t}var e,n={top:0,right:0,bottom:0,left:0},a=null,o=null,r=(nv.utils.defaultColor(),nv.models.tooltip()),s=null,i=d3.dispatch("renderEnd"),l=0,c=nv.utils.renderWatch(i);return r.contentGenerator(function(t){return'<div style="padding:10px"><div class"row"><div class="col-md-3" style="text-align: right;font-weight:bolder">ID:</div><div style="padding:0px" class="col-md-9">'+t.id+'</div></div><div class"row"><div class="col-md-3" style="text-align: right;font-weight:bolder">ClassName:</div><div class="col-md-9" style="padding:0px">'+t.name+'</div></div><div class"row"><div class="col-md-3" style="text-align: right;font-weight:bolder">Before:</div><div class="col-md-9" style="padding:0px">'+t.before+'&nbsp; </div></div><div class"row"><div class="col-md-3" style="text-align: right;font-weight:bolder">After:</div><div class="col-md-9" style="padding:0px">'+t.after+"</div></div></div>"}),t.dispatch=i,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},currentIndex:{get:function(){return l},set:function(t){l=t}},currentStatus:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return o},set:function(t){o=t}},noData:{get:function(){return s},set:function(t){s=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}}}),nv.utils.initOptions(t),t},function(){"use strict";angular.module("viModule").directive("elastic",["$timeout",function(t){return{require:"ngModel",restrict:"A",link:function(t,e,n){t.initialHeight=t.initialHeight||e[0].style.height;var a=function(){e[0].style.height=t.initialHeight,e[0].style.height=""+e[0].scrollHeight+"px"};t.$watch(n.ngModel,function(){a()})}}}])}(),function(){d3.hexbin=function(){function a(t){var e={};return t.forEach(function(t,n){var o=u.call(a,t,n)/i,r=Math.round(o),l=d.call(a,t,n)/s-(1&r?.5:0),c=Math.round(l),p=o-r;if(3*Math.abs(p)>1){var m=l-c,h=c+(c>l?-1:1)/2,v=r+(r>o?-1:1),f=l-h,g=o-v;m*m+p*p>f*f+g*g&&(c=h+(1&r?1:-1)/2,r=v)}var b=c+"-"+r,y=e[b];y?y.push(t):(y=e[b]=[t],y.i=c,y.j=r,y.x=(c+(1&r?.5:0))*s,y.y=r*i)}),d3.values(e)}function o(e){var n=0,a=0;return t.map(function(t){var o=Math.sin(t)*e,r=-Math.cos(t)*e,s=o-n,i=r-a;return n=o,a=r,[s,i]})}var r,s,i,l=1,c=1,d=e,u=n;return a.x=function(t){return arguments.length?(d=t,a):d},a.y=function(t){return arguments.length?(u=t,a):u},a.hexagon=function(t){return arguments.length<1&&(t=r),"m"+o(t).join("l")+"z"},a.centers=function(){for(var t=[],e=0,n=!1,a=0;c+r>e;e+=i,n=!n,++a)for(var o=n?s/2:0,d=0;l+s/2>o;o+=s,++d){var u=[o,e];u.i=d,u.j=a,t.push(u)}return t},a.mesh=function(){var t=o(r).slice(0,4).join("l");return a.centers().map(function(e){return"M"+e+"m"+t}).join("")},a.size=function(t){return arguments.length?(l=+t[0],c=+t[1],a):[l,c]},a.radius=function(t){return arguments.length?(r=+t,s=2*r*Math.sin(Math.PI/3),i=1.5*r,a):r},a.radius(1)};var t=d3.range(0,2*Math.PI,Math.PI/3),e=function(t){return t[0]},n=function(t){return t[1]}}(),function(){"use strict";angular.module("viModule").directive("compile",["$compile",function(t){return function(e,n,a){e.$watch(function(t){return t.$eval(a.compile)},function(a){n.html(a),t(n.contents())(e)})}}])}(),function(){"use strict";function t(t,e,n,a,o){var r=this,s=function(){r.selectedType&&r.selectedType.value&&n.getStatus(r.selectedType.value,function(t){r.cellCollection=[],r.cols=[],r.colCount=4;for(var e in t){var n={id:e};angular.extend(n,t[e]),r.cellCollection.push(n)}if(r.cellCollection.length>0){var a=r.cellCollection[0],o=0;for(var s in a)r.cols.push({name:s}),o++;for(var i=90/o,l=0;l<r.cols.length;l++)r.cols[l].width=i+"%"}r.colCount=r.cols.length+1})};r.typeChange=function(){s()},r.refresh=function(t){e({text:'Are you sure you want to refresh "'+t.id+'" ?'}).then(function(){n.refresh({id:t.id,typeName:r.selectedType.value},function(t){return t instanceof VIException?(o.error(t.Message,"refresh failed!"),!1):(o.success("refresh success!"),void s())})})},n.getTypes(function(t,e){r.types=t.map(function(t){var e=t.lastIndexOf(".");return{name:t.substr(e+1),value:t}}),r.selectedType=r.types[0],s()})}t.$inject=["$scope","$confirm","cacheService","SiteCache","toastr"],angular.module("viModule").controller("CacheController",t)}(),function(){"use strict";function t(t,e,n){var a="threading/",o={apiUrl:a,getAll:function(t){return n.doGet(a+"all").then(t)},getStats:function(t){return n.doGet(a+"stats").then(t)},dump:function(t,e){return n.doGet(a+"dump",t).then(e)},getDetail:function(t,e,o){return n.doGet(a+"detail/"+t,e).then(o)},update:function(t,e){return n.doPost(t,a+"update").then(e)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("threadService",t)}(),function(){"use strict";function t(t,e,n,a){var o="component/",r={apiUrl:o,getServiceStatus:function(){return n.doGet(o+"serverStatus")},getComponentMeta:function(){return n.doGet(o+"meta")},getComponentFieldMeta:function(){return n.doGet(o+"fieldmeta")},getComponentInfo:function(t){return n.doGet(o+t)},getHostInfo:function(){return n.doGet(o+"vi.hostinfo")},doComponentMethod:function(t,e,a){return n.doPost(a,o+t+"/"+e)},loopWithPeriod:function(t,e,r,s,i){var l,c=function(){n.doGet(o+e,{$fields:i}).then(function(t){s(t)&&(l=a(c,r))})};return c(),t.$on("$destroy",function(){a.cancel(l)}),{pause:function(){a.cancel(l)},resume:function(){l=a(c,r)}}}};return r}t.$inject=["$log","$http","ApiService","$timeout"],angular.module("viModule").factory("serviceInfo",t)}(),function(){"use strict";angular.module("viModule").factory("metricsService",["$http","ApiService",function(t,e){var n="metrics/";return{getNames:function(t){return e.doGet(n+"names").then(t)},register:function(t,a){return e.doPost(t,n+"register").then(a)},getCurrent:function(t,a){return e.doPost({id:t},n+"current").then(a)}}}])}(),function(){"use strict";function t(t,e,n){var a="log/",o={apiUrl:a,getAll:function(t){return n.doGet(a+"all").then(t)},getDetail:function(t,e,o){return n.doGet(a+t,e).then(o)},update:function(t,e){return n.doPost(t,a+"update").then(e)},download:function(t){window.open(n.getEndpoint()+"/download/log/"+t,"_self")}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("logInfo",t)}(),function(){"use strict";function t(t,e,n){var a="fc/",o={apiUrl:a,getAll:function(t){return n.doGetFunc(a+"all",t)},update:function(t,e){return n.doPost(t,a+"update").then(e)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("fcService",t)}(),function(){"use strict";function t(t,e,n){var a="enterprise/",o={apiUrl:a,getServers:function(t){return n.doGetFunc(a+"servers",t)},getHelp:function(t){return n.doGetFunc(a+"help",t)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("enterpriseService",t)}(),function(){"use strict";angular.module("viModule").factory("customPageService",["ApiService",function(t){var e="enterprise/page/";return{get:function(n){return t.doGet(e+n)},doMethod:function(n,a,o){return t.doPost(o,e+n+"/"+a)}}}])}(),function(){"use strict";angular.module("viModule").factory("customComponentStatus",["$http","ApiService",function(t,e){var n=e.getEndpoint()+"/component/";return{getCustom:function(e){return t.get(n+e+"/custom")}}}])}(),function(){"use strict";function t(t,e,n){var a="config/",o={apiUrl:a,getAll:function(t){return n.doGet(a+"all").then(t)},get:function(t,e){return n.doGet(a+"get",{key:t}).then(e)},getRemarks:function(t){return n.doGet(a+"remarks").then(t)},update:function(t,e){return n.doPost(t,a+"update").then(e)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("configService",t)}(),function(){"use strict";function t(t,e,n){var a="cache/",o={apiUrl:a,getStatus:function(t,e){return n.doGet(a+"status/"+t).then(e)},getTypes:function(t){return n.doGet(a+"types").then(t)},refresh:function(t,e){return n.doPost(t,a+"refresh").then(e)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("cacheService",t)}(),function(){"use strict";function t(t,e,n){var a="app/",o={apiUrl:a,markDown:function(t){return n.doPost({},a+"markdown").then(t)},markUp:function(t){return n.doPost({},a+"markup").then(t)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("appService",t)}(),function(){"use strict";function t(t,e,n){var a="analyzer/",o={apiUrl:a,getDeps:function(t){return n.doGet(a+"deps").then(t)},getHeapHisto:function(t){return n.doGet(a+"heaphisto").then(t)}};return o}t.$inject=["$log","$http","ApiService"],angular.module("viModule").factory("analyzerService",t)}();var VIUtil=function(){var t=1048576,e=1e6,n=1e3*e,a=1024*t;return{removeArrayItem:function(t,e){var n=t.indexOf(e);return n>=0?(t.splice(n,1),!0):!1},calculateRunTime:function(t){var e=new Date(t),n=e.getUTCSeconds(),a=e.getUTCMinutes(),o=e.getUTCHours(),r=e.getUTCDate()-1,s=e.getUTCMonth(),i=e.getFullYear()-1970,l="";return i>0&&(l+=i+"年"),s>0&&(l+=s+"月"),r>0&&(l+=r+"天"),o>0&&(l+=o+"小时"),a>0&&(l+=a+"分钟"),n>0&&(l+=n+"秒"),l},formatBytes:function(e,n){n||(e>a?n="G":e>t?n="M":e>1024&&(n="K"));var o=e;switch(n){case"G":o=d3.format("#,.1f")(e/a)+"GB";break;case"M":o=d3.format("#,.1f")(e/t)+"MB";break;case"K":o=d3.format("#,.1f")(e/1024)+"KB";break;default:o=e+"b"}return o},formatNumber:function(t){return t>n?d3.format("#,.1f")(t/n)+"G":t>e?d3.format("#,.1f")(t/e)+"M":t>1024?d3.format("#,.1f")(t/1e3)+"K":t},getNumberFromStr:function(t){return t.replace(/[^\d^\.]/g,"")-0}}}();!function(){"use strict";function t(t,e,n){RegExp.escape=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(!t)return-1;for(var e=0;e<this.length;e++)if(t(this[e]))return e}),e.debug("runBlock end")}t.$inject=["$http","$log","$location"],angular.module("viModule").run(t)}(),function(){"use strict";function routerConfig($stateProvider,$urlRouterProvider,$controllerProvider){var customComponentCache={},customPageCache={},states=$stateProvider.state("empty",{}).state("Configuration",{url:"/config",templateUrl:"app/config/config.html",controller:"ConfigController",controllerAs:"vm"}).state("Dashboard",{url:"/dashboard",templateUrl:"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"}).state("JVM-Sampler",{url:"/dashboard/trace",templateUrl:"app/dashboard/trace/trace.html",controller:"TraceController",controllerAs:"vm"}).state("Component",{url:"/",templateUrl:"app/component/component.html",controller:"ComponentController",controllerAs:"vm"}).state("Component-Detail",{url:"/component/detail/:id/:name",templateUrl:"app/component/component.detail.html",controller:"ComponentDetailController",controllerAs:"vm"}).state("Component-DetailList",{url:"/component/detail.list/:id/:name",templateUrl:"app/component/component.detail.list.html",controller:"ComponentDetailListController",controllerAs:"vm"}).state("Component-Custom",{url:"/component/custom/:id/:name",template:function(t){return'<div ng-controller="'+t.id+'">'+customComponentCache[t.id+".html"]+"</div>"},resolve:{load:["$q","$stateParams","customComponentStatus",function($q,$stateParams,customComponentStatus){return customComponentStatus.getCustom($stateParams.id).then(function(data){customComponentCache[$stateParams.id+".html"]=unescape(data.data.html);var tmpFun=eval("({fun:"+data.data.js+"})");$controllerProvider.register($stateParams.id,tmpFun.fun)})}]},controllerAs:"vm"}).state("FC",{url:"/fc",templateUrl:"app/fc/fc.html",controller:"FCController",controllerAs:"vm"}).state("Log",{url:"/log",templateUrl:"app/log/log.html",controller:"LogController",controllerAs:"vm"}).state("Log-Detail",{url:"/log/detail/:name/:size",templateUrl:"app/log/log.detail.html",controller:"LogDetailController",controllerAs:"vm"}).state("ThreadDump",{url:"/threaddump",templateUrl:"app/threaddump/threaddump.html",controller:"ThreadDumpController",controllerAs:"vm"}).state("Cache",{url:"/cache",templateUrl:"app/cache/cache.html",controller:"CacheController",controllerAs:"vm"}).state("Analyzer-Jardependency",{url:"/analyzer/jardeps",templateUrl:"app/analyzer/jardeps.html",controller:"JardepsController",controllerAs:"vm"}).state("Analyzer-JVMSampler",{url:"/analyzer/jvmsampler",templateUrl:"app/analyzer/jvmsampler.html",controller:"JvmSamplerController",controllerAs:"vm"});if("undefined"!=typeof $SMENU){var templateFun=function(t){return'<div ng-controller="'+t.pageId+'">'+customPageCache[t.pageId+".html"]+"</div>"},resolveFun={load:function($q,$stateParams,customPageService){return $stateParams.pageId="custom-"+this.self.name,$stateParams.stateId=this.self.name,customPageService.get(this.self.name).then(function(data){customPageCache[$stateParams.pageId+".html"]=unescape(data.html);var tmpFun=eval("({fun:"+data.js+"})");$controllerProvider.register($stateParams.pageId,tmpFun.fun)})}},addStateFun=function(t){t.isBuildIn||states.state(t.state,{url:"/page/"+t.state,template:templateFun,resolve:resolveFun})};angular.forEach($SMENU,function(t){addStateFun(t),t.submenu&&angular.forEach(t.submenu,addStateFun)})}$urlRouterProvider.otherwise("/")}routerConfig.$inject=["$stateProvider","$urlRouterProvider","$controllerProvider"],angular.module("viModule").config(routerConfig)}(),function(){"use strict";angular.module("viModule").filter("size",function(){return VIUtil.formatBytes})}(),function(){"use strict";angular.module("viModule").factory("ApiService",["$window","$log","$http","API_ENDPOINT",function(t,e,n,a){var o=a,r=o.host?o.port?o.host+":"+o.port+o.path:o.host+o.path:o.path;return{getEndpoint:function(){return r},setEndpoint:function(t){o=t,r=o.host?o.port?o.host+":"+o.port+o.path:o.host+o.path:o.path},doGet:function(t,a){var t=r+"/"+t;return n.get(t,{params:a}).then(function(t){return t.data})["catch"](function(n){e.error("XHR Failed for get"+t+".\n"+angular.toJson(n.data,!0))})},doGetFunc:function(t,a){var t=r+"/"+t;return n.get(t).then(function(t){return a(t.data,t.headers("vi-permission"))})["catch"](function(n){e.error("XHR Failed for get"+t+".\n"+angular.toJson(n.data,!0))})},doPost:function(t,a){var a=r+"/"+a;return n({url:a,method:"POST",data:t}).then(function(t){var e=t.data;if("string"==typeof e&&"$@###@"==e.substr(0,6)){var n=e.lastIndexOf("@");return new VIException(e.substr(6,n-6),e.substr(n+1))}return e},function(t){e.error("XHR Failed for get"+a+".\n"+angular.toJson(t.data,!0))})},getAbsoluteUrl:function(t){return this.getEndpoint()+t}}}]).factory("SiteCache",["$cacheFactory",function(t){return t("siteCache")}])}(),function(){"use strict";function t(t,e,n){var a=this;a.collapse=function(t){a.sidebarCollapse=t},t.put("fieldMeta",{}),e.getComponentFieldMeta().then(function(e){t.put("fieldMeta",e),n.$broadcast("fieldMeta",e)}),e.getHostInfo().then(function(e){t.put("hostInfo",e),n.$broadcast("hostInfo.ready",e)})}t.$inject=["SiteCache","serviceInfo","$rootScope"],angular.module("viModule").controller("IndexController",t)}(),function(){"use strict";angular.module("viModule").constant("Permission",{ALL:1,READ:2,EDIT:4})}(),function(){"use strict";function t(t,e,n){t.debugEnabled(!0),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventOpenDuplicates=!0,e.progressBar=!1,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"}t.$inject=["$logProvider","toastrConfig","$httpProvider"],angular.module("viModule").config(t)}(),function(){return angular.module("viModule").constant("API_ENDPOINT",{path:"api",needsAuth:!1})}(),angular.module("viModule").run(["$templateCache",function(t){t.put("app/analyzer/jardeps.html",'<div class="op-area type-switch row"><div class="btn-group col-md-3"><label class="btn btn-primary" ng-model="vm.type" uib-btn-radio="\'net\'">Net</label> <label class="btn btn-primary" ng-model="vm.type" uib-btn-radio="\'tree\'">Tree</label></div><div class="input-group col-md-6"><div class="input-group-addon"><i class="fa fa-search"></i></div><input placeholder="key word" ng-model="vm.keyword" ng-change="vm.keywordChange()" class="input-sm form-control" type="search"></div></div><div class="op-area" ng-class="{\'net-mode\':vm.type===\'net\'}"><div class="normal cell"><input type="checkbox" ng-model="vm.seleNormal">normal ({{vm.normalCount}})</div><div class="start cell"><input type="checkbox" ng-model="vm.seleStart">start</div><div class="low cell"><input type="checkbox" ng-model="vm.seleLow">low version ({{vm.lowCount}})</div><div class="many cell"><input type="checkbox" ng-model="vm.seleMany">many version ({{vm.manyCount}})</div></div><div class="main-area op-area" ng-show="vm.type===\'tree\'"><table class="table deps-table"><colgroup><col style="width: 85%;"><col style="width: 15%;"></colgroup><thead><tr class="widget-header"><th>Name</th><th>Version</th></tr></thead><tbody ng-repeat="r in vm.data | filter:{\'fullName\':vm.keyword}" ng-show="vm.showRow(r)"><tr ng-dblclick="r.show=!r.show" class="art-row {{r.type}}"><td><span ng-click="r.show=!r.show" class="btn"><i ng-class="{\'fa-minus-circle\':r.show,\'fa-plus-circle\':!r.show}" class="fa"></i></span> {{r.fullName}}</td><td>{{r.version}}</td></tr><tr ng-show="r.show"><td colspan="2">Dependencies</td></tr><tr ng-show="r.show" class="dep-row {{d.type}}" ng-repeat="d in r.dependencies"><td>{{d.groupId}}:{{d.artifactId}}:{{d.version}}[{{d.scope||\'compile\'}}]</td><td>{{d.version}}</td></tr><tr ng-show="r.show"><td colspan="2">Usages</td></tr><tr ng-show="r.show" class="dep-row {{d.type}}" ng-repeat="d in r.targets" ng-class="{\'wrong-version\': r.version!=d.needVersion}"><td>{{d.groupId}}:{{d.artifactId}}:{{d.version}}[{{d.scope||\'compile\'}}]</td><td>{{d.needVersion}}</td></tr></tbody></table></div><div ng-show="vm.type==\'net\'" class="d3-tooltip deps-tooltip"><div class="title">{{vm.seleNode.groupId}}:{{vm.seleNode.artifactId}}:<span class="pom-version">{{vm.seleNode.version}}</span></div><div class="title">Location: {{vm.seleNode.location}}</div><div class="title">Size: {{vm.seleNode.size/1024|number:2}} KB</div><div>Dependencies:</div><ul><li ng-repeat="d in vm.seleNode.dependencies"><div>{{d.groupId}}:{{d.artifactId}}:{{d.version}}[{{d.scope||\'compile\'}}]</div></li></ul><div>Usages:</div><ul><li ng-repeat="d in vm.seleNode.targets"><div>{{d.groupId}}:{{d.artifactId}}:{{d.version}}[{{d.scope||\'compile\'}}] -> <span ng-class="{\'wrong-version\':vm.seleNode.version!=d.needVersion}" class="pom-version">{{d.needVersion}}</span></div></li></ul></div>'),t.put("app/analyzer/jvmsampler.html",'<script type="text/ng-template" id="pagination.custom.html"><nav ng-if="pages.length >= 2"> <ul class="pagination"> <li><a ng-click="selectPage(1)">First</a> </li> <li><a ng-click="selectPage(currentPage - 1)">&lt;</a> </li> <li> <a> <page-select></page-select>of {{numPages}}</a> </li> <li><a ng-click="selectPage(currentPage + 1)">&gt;</a> </li> <li><a ng-click="selectPage(numPages)">Last</a> </li> </ul> </nav></script><table st-table="vm.list" st-safe-src="vm.rawList" class="table table-striped"><thead><tr><th colspan="3" class="search-container"><div class="widget-header"><span class="title">JVM heapHisto({{vm.rawList.length}})</span><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="关键字" class="input-sm form-control" type="search"></div></div></th></tr><tr class="summary-bar"><th colspan="3"><div class="info-cell">total objects count: {{vm.totalCount}} / total bytes: {{vm.totalSize}}</div></th></tr><tr class="widget-header"><th class="sorting" st-sort="class" width="50%">class</th><th class="sorting" st-sort="count" width="25%">count</th><th class="sorting" st-sort="bytes" width="25%">bytes</th></tr><tr><th><input placeholder="search className" st-search="class"></th><th><st-number-range predicate="count" lower="query.lower" higher="query.higher"></st-number-range></th><th><st-number-range predicate="bytes" lower="query.lower" higher="query.higher"></st-number-range></th></tr></thead><tbody><tr ng-repeat="item in vm.list"><td>{{item.class}}</td><td>{{item.count | number}}</td><td>{{item.bytes | size}}</td></tr></tbody><tfoot><tr><td colspan="5" class="text-center"><div st-items-by-page="15" st-pagination="" st-template="pagination.custom.html"></div></td></tr></tfoot></table>'),t.put("app/cache/cache.html",'<table st-table="displayCollection" st-sticky-header="" st-safe-src="vm.cellCollection" class="table table-striped" st-sticky-header-top="65"><thead class="sticky-header"><tr><th colspan="{{vm.colCount}}" class="search-container"><div class="widget-header"><span class="title">Cache Refresh</span><select class="form-control" ng-change="vm.typeChange()" ng-model="vm.selectedType" ng-options="name.name for name in vm.types"></select><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="key word" class="input-sm form-control" type="search"></div></div></th></tr><tr class="widget-header"><th width="10%"></th><th class="sorting" ng-repeat="col in vm.cols" st-sort="{{col.name}}" width="{{col.width}}">{{col.name}}</th></tr></thead><tbody><tr ng-repeat="item in displayCollection"><td><button ng-click="vm.refresh(item)" class="btn btn-primary">refresh</button></td><td ng-repeat="col in vm.cols">{{item[col.name]}}</td></tr></tbody></table>'),t.put("app/component/component.detail.html",'<table st-table="vm.displayCollection" st-safe-src="vm.rowCollection" class="table table-striped" st-sticky-header="" st-sticky-header-top="65"><thead class="sticky-header"><tr><th colspan="3" class="search-container"><div class="widget-header"><span class="title">Component / {{vm.componentName}}({{vm.rowCollection.length}})</span><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="key word" class="input-sm form-control" type="search"></div></div></th></tr><tr class="widget-header"><th class="sorting" st-sort="name" width="15%">Name</th><th class="sorting" st-sort="value" width="{{vm.hasMeta?45:85}}%">Value</th><th class="sorting" ng-show="vm.hasMeta" st-sort="description" width="40%">Description</th></tr></thead><tbody><tr ng-repeat="row in vm.displayCollection"><td>{{row.name}}</td><td ng-bind-html="row.value"></td><td ng-show="vm.hasMeta">{{row.description}} <a ng-show="row.link" href="{{row.link}}" target="_blank">&nbsp;{{row.linkTxt}}</a></td></tr></tbody></table>'),t.put("app/component/component.detail.list.html",'<script type="text/ng-template" id="pagination.custom.html"><nav ng-if="pages.length >= 2"> <ul class="pagination"> <li><a ng-click="selectPage(1)">First</a> </li> <li><a ng-click="selectPage(currentPage - 1)">&lt;</a> </li> <li> <a> <page-select></page-select>of {{numPages}}</a> </li> <li><a ng-click="selectPage(currentPage + 1)">&gt;</a> </li> <li><a ng-click="selectPage(numPages)">Last</a> </li> </ul> </nav></script><table st-table="vm.displayCollection" st-safe-src="vm.rowCollection" class="table table-striped"><thead class="sticky-header"><tr><th colspan="{{vm.colCount}}" class="search-container"><div class="widget-header"><span class="title">Component / {{vm.componentName}}({{vm.rowCollection.length}})</span><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="key word" class="input-sm form-control" type="search"></div></div></th></tr><tr class="widget-header"><th class="sorting" st-sort="{{c.field}}" width="{{c.width}}" ng-repeat="c in vm.colCollection"><span uib-tooltip="{{c.description}}" tooltip-placement="top-center">{{c.name}}</span></th></tr></thead><tbody><tr ng-repeat="row in vm.displayCollection"><td ng-repeat="c in vm.colCollection">{{c.formatFn(row[c.field])}}</td></tr></tbody><tfoot ng-if="vm.hasTotal"><tr class="list-summary"><td colspan="{{vm.colCollection.length}}">Summary:</td></tr><tr><th width="{{c.width}}" ng-repeat="c in vm.colCollection">{{vm.getTotal(c.field,c.type)}}</th></tr></tfoot><tfoot><tr><td colspan="{{vm.colCollection.length}}" class="text-center"><div st-items-by-page="15" st-pagination="" st-template="pagination.custom.html"></div></td></tr></tfoot></table>'),
t.put("app/component/component.html",'<div class="home-page"><button class="circle-btn btn sm-btn" ng-click="vm.changeCircle()"><i class="fa {{vm.circleClass}} green"></i></button><ul class="summary-box"><li><h2>HostInfo</h2><table class="modtable"><tbody><tr ng-repeat="info in vm.sysInfo"><th style="width:210px"><span uib-tooltip="{{info.description}}" tooltip-placement="bottom-right">{{info.name}}:</span></th><td class="{{info.cssClass}}"><span class="info-value" compile="info.html"></span> {{info.value}} <a ng-show="info.link" href="{{info.link}}" target="_blank">&nbsp;{{info.linkTxt}}</a></td></tr></tbody></table></li><li><h2>AppInfo</h2><table class="modtable"><tbody><tr ng-repeat="info in vm.buildInfo"><th style="width:150px"><span uib-tooltip="{{info.description}}" tooltip-placement="bottom-right">{{info.name}}:</span></th><td><span class="info-value" compile="vm.getValHtml(info)"></span></td></tr></tbody></table></li></ul><table class="table" st-table="vm.components" st-safe-src="vm.rawComponents"><colgroup><col style="width: 20%;"></colgroup><thead><tr><td colspan="2"><div class="widget-header"><span class="title">Component</span><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="关键字" class="input-sm form-control" type="search"></div></div></td></tr></thead><tbody><tr ng-repeat="c in vm.components"><th><a href="#{{c.href}}">{{c.name}}</a></th><td>{{c.description}}</td></tr></tbody></table></div>'),t.put("app/config/config.html",'<script type="text/ng-template" id="configModal.html"><div class="modal-header"> <h3 class="modal-title">Submit changes</h3> </div> <div class="modal-body"> <div ng-show="configs.length==0">No changes</div> <div ng-show="configs.length>0"> <div ng-repeat="config in configs" class="row"> <div class="align-right col-xs-6">{{config.key}}:</div> <div class="col-xs-6">{{config.old}}->{{config.value}}</div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> </div></script><table st-table="displayCollection" st-sticky-header="" st-safe-src="vm.configCollection" class="table table-striped" st-sticky-header-top="65"><thead class="sticky-header"><tr><th colspan="4" class="search-container"><div class="widget-header"><span class="title">Configuration</span><select class="form-control" ng-model="vm.selectedConfig" ng-options="cf.value as cf.name for cf in vm.configGroups"></select><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="key word" class="input-sm form-control" type="search"></div><button ng-click="vm.openModal()" type="button" class="right-btn btn btn-primary">Submit</button></div></th></tr><tr class="widget-header"><th class="sorting" st-sort="key" width="25%">Key</th><th class="sorting" st-sort="value" width="45%">Value</th><th class="sorting" st-sort="description" width="30%">Description</th></tr></thead><tbody><tr ng-repeat="config in displayCollection | filter:vm.configFilter" ng-class="{\'value-changed\':config.value!=config.old}"><td>{{config.key}}</td><td><button ng-show="!config.inEdit && !config.readOnly" class="btn sm-btn" ng-click="config.new=config.value;config.inEdit=true"><i class="fa fa-pencil"></i></button> <span ng-show="!config.inEdit && config.value!=config.old">{{config.old}}-></span> <span ng-show="!config.inEdit">{{config.value}}</span> <input ng-show="config.inEdit" class="config-input" ng-model="config.new"><div ng-show="config.inEdit" class="btn-group"><button class="btn sm-btn undo" ng-click="config.new=config.old"><i class="fa fa-undo"></i></button> <button class="btn sm-btn red" ng-click="config.inEdit=false"><i class="fa fa-close"></i></button> <button class="btn sm-btn green" ng-click="config.value=config.new;config.inEdit=false"><i class="fa fa-check"></i></button></div></td><td>{{config.description}}</td></tr></tbody></table>'),t.put("app/dashboard/dashboard.html",'<script type="text/ng-template" id="pagination.custom.html"><nav ng-if="pages.length >= 2"> <ul class="pagination"> <li><a ng-click="selectPage(1)">First</a> </li> <li><a ng-click="selectPage(currentPage - 1)">&lt;</a> </li> <li> <a> <page-select></page-select>of {{numPages}}</a> </li> <li><a ng-click="selectPage(currentPage + 1)">&gt;</a> </li> <li><a ng-click="selectPage(numPages)">Last</a> </li> </ul> </nav></script><div class="dashboard"><div class="row"><div class="col-md-6 form-group" uib-dropdown="" is-open="vm.isOpen" keyboard-nav=""><label>Metrics:</label> <input placeholder="metrics name" ng-click="vm.toggled(true)" uib-dropdown-toggle="" class="input-sm form-control" type="search" ng-model="query" ng-keydown="vm.onKeyDown($event)"><div class="dropdown-menu" uib-dropdown-menu="" aria-labelledby="simple-dropdown"><table search-watch-model="query" st-table="vm.list" st-safe-src="vm.metrics" class="table"><tbody><tr ng-class="{\'select-row\':index==vm.selectedIndex}" ng-repeat="(index,m) in vm.list" ng-click="vm.selectName(m)"><td>{{m}}</td></tr></tbody><tfoot ng-click="$event.stopPropagation()"><tr><td class="text-center"><div st-items-by-page="10" st-pagination="" st-template="pagination.custom.html"></div></td></tr></tfoot></table></div></div><div class="selected col-md-6 form-group"><ul><li ng-repeat="m in vm.selectedNames" ng-click="vm.removeName(m)"><span>{{m}}</span> <button class="btn sm-btn red"><i class="fa fa-close"></i></button></li></ul></div></div><div class="row" ng-show="false"><div class="col-md-6 form-group"><label>Tags:</label></div></div><div class="row"><div class="col-md-6"><button class="monitor-btn btn btn-danger active" ng-click="vm.monitor()">Monitor</button> <label><input type="checkbox" ng-model="vm.enablePercentile"> Enable percentile</label></div></div><div class="row"><nvd3 options="vm.chartOptions" data="vm.chartData"></nvd3></div><div class="row"><nvd3 options="vm.chartCostOptions" data="vm.chartCostData"></nvd3></div></div>'),t.put("app/fc/fc.html",'<script type="text/ng-template" id="fcModal.html"><div class="modal-header"> <h3 class="modal-title">Submit changes</h3> </div> <div class="modal-body"> <div ng-show="fcs.length==0"> No changes </div> <div ng-show="fcs.length>0"> <div ng-repeat="fc in fcs" class="row"> <div class="align-right col-xs-9">{{fc.key}}:</div> <div class="col-xs-3">{{fc.old}}->{{fc.value}}</div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> </div></script><table st-table="displayCollection" st-safe-src="vm.fcCollection" class="table table-striped" st-sticky-header="" st-sticky-header-top="65"><thead class="sticky-header"><tr><th colspan="4" class="search-container"><div class="widget-header"><span class="title">FC</span><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="feature name" class="input-sm form-control" type="search"></div><button ng-click="vm.openModal()" type="button" class="right-btn btn btn-primary" ng-show="vm.hasAuthority">Submit</button></div></th></tr><tr class="widget-header"><th class="sorting" st-sort="key" width="50%">Feature Name</th><th class="sorting" st-sort="value" width="15%"></th><th class="sorting" st-sort="remark" with="35%"></th></tr></thead><tbody><tr ng-repeat="fc in displayCollection | filter:vm.fcFilter" ng-class="{\'value-changed\':fc.value!=fc.old}"><td>{{fc.key}}</td><td><switch ng-model="fc.value" class="green" disabled="!vm.hasAuthority"></switch></td><td>{{fc.remark}}</td></tr></tbody></table>'),t.put("app/log/log.detail.html",'<script type="text/ng-template" id="log-detail-stat"><div class="modal-header"> <h3 class="modal-title">{{title}}</h3> </div> <div class="modal-body row"> <div class="col-md-6"> <nvd3 options="chartOptions" data="chartData"></nvd3> </div> <div class="col-md-6 stat-result"> <div class="row" ng-repeat="v in values"> <div class="col-sm-6 label-col">{{v.label}}</div> <div class="col-sm-6">{{v.value|number}}</div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="close()">close</button> </div></script><div class="log-detail"><div class="toolbar"><div class="btn-group"><button uib-tooltip="使用标签过滤日志" tooltip-placement="bottom-left" class="btn btn-sm btn-info" ng-click="vm.showFilter=!vm.showFilter;"><i ng-show="!vm.showFilter" class="fa fa-filter"></i> <i ng-show="vm.showFilter" class="fa fa-angle-double-up"></i></button> <button uib-tooltip="清除过滤条件" tooltip-placement="bottom-left" class="btn btn-sm btn-info" ng-click="vm.clearFilter()"><i class="fa fa-eraser"></i></button> <button uib-tooltip="{{vm.onBottom?\'滚动到顶部\':\'滚动到底部\'}}" tooltip-placement="bottom-left" class="btn btn-sm btn-info" ng-click="vm.upDown()"><i class="fa" ng-class="{\'fa-chevron-down\':!vm.onBottom,\'fa-chevron-up\':vm.onBottom}"></i></button> <button uib-tooltip="点击切换搜索模式.文本搜索Txt,正则搜索Regex(正则模式使用回车执行查询)" tooltip-placement="bottom-left" class="btn btn-sm btn-info" ng-click="vm.inRegexMode=!vm.inRegexMode">{{vm.inRegexMode?\'Regex\':\'Txt\'}}</button><div class="input-group"><input ng-show="vm.showFilter" placeholder="tag name" class="input-sm form-control" ng-model="vm.tagname" type="search" ng-change="vm.searchTag()"> <input ng-show="!vm.showFilter" placeholder="key word" class="input-sm form-control" ng-model="vm.keyword" type="search" ng-keyup="vm.asyncSearch()" ng-keypress="(vm.inRegexMode && $event.which===13)?vm.search(false):0"> <span ng-show="!vm.showFilter" class="input-group-addon btn btn-info" ng-click="vm.reset()"><i class="fa fa-close"></i></span> <span ng-show="!vm.showFilter && vm.currentMatches" class="input-group-addon btn btn-sm btn-info" ng-click="vm.showSearchStat()"><i class="fa fa-bar-chart"></i></span> <span ng-show="!vm.showFilter && vm.currentMatches" class="input-group-addon">found:{{vm.foundCount}}</span></div><div ng-show="vm.showFilter" class="btn-group"><label class="btn btn-primary" ng-repeat="t in vm.tags |orderBy:\'-count\'|filter:vm.tagname" ng-click="vm.filterTag(t.key)" ng-model="vm.seleTags[t.key]" uib-btn-checkbox="">{{t.key}}({{t.count}})</label></div><div ng-show="!vm.showFilter && vm.getFilterTags().length>0" class="sele-tags"><span class="log-tag btn btn-primary" ng-repeat="t in vm.getFilterTags()" ng-click="vm.seleTags[t.key]=false;vm.filterTag(t.key)">{{t.key}}({{t.count}}) <i class="fa fa-close"></i></span></div></div></div><a id="vi-log-top"></a><div ng-show="!vm.loadingComplete" class="spinner-panel"><i class="fa fa-spinner fa-pulse fa-fw fa-3x"></i></div><div class="log-list" ng-style="{\'paddingTop\':vm.getFilterTags().length>0?\'70px\':\'30px\'}" ng-show="vm.loadingComplete" ng-class="{\'filter\':vm.isInFilter}"></div><div class="partion-selector"></div><a id="vi-log-bottom"></a></div>'),t.put("app/log/log.html",'<table class="table" st-table="vm.logs" st-safe-src="vm.rawLogs" st-sticky-header="" st-sticky-header-top="15"><thead class="sticky-header"><tr><th colspan="4"><div class="widget-header"><span class="title">Log({{vm.rawLogs.length}})</span><div class="input-group"><div class="input-group-addon"><i class="fa fa-search"></i></div><input st-search="" placeholder="key word" class="input-sm form-control" type="search"></div></div></th></tr><tr class="widget-header"><th class="sorting" st-sort="name" width="50%">File Name</th><th st-sort-default="reverse" st-sort="modifiedTime" class="sorting" width="15%">Last Modified Time</th><th class="sorting" st-sort="size" width="15%">Size</th><th width="20%">Download</th></tr></thead><tbody><tr ng-repeat="c in vm.logs"><th><a href="#{{c.href}}">{{c.name}}</a></th><td>{{c.modifiedTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</td><td>{{c.size/1024|number:2}} KB</td><td><button class="btn btn-default" ng-click="vm.download(c.name)">download</button></td></tr></tbody></table>'),t.put("app/threaddump/threaddump.html",'<script type="text/ng-template" id="threadModal.html"><div class="modal-header"> <h3 class="modal-title">{{title}}</h3> </div> <div class="modal-body"> <table st-table="displayCollection" st-safe-src="rawCollection" class="table table-striped"> <thead> <tr> <th colspan="4" class="search-container"> <div class="widget-header"> <div class="input-group"> <div class="input-group-addon"><i class="fa fa-search"></i> </div> <input st-search placeholder="key word" class="input-sm form-control" type="search" /> </div> </div> </th> </tr> <tr class="widget-header"> <th class="sorting" st-sort="threadId" width="10%">Id</th> <th class="sorting" st-sort="threadName" width="15%">Name</th> <th class="sorting" st-sort="threadState" width="10%">State</th> <th class="sorting" st-sort="waitedCount" width="10%">Waited Count</th> <th class="sorting" st-sort="blockedCount" width="10%">Blocked Count</th> <th width="45%">Stack Trace</th> </tr> </thead> <tbody> <tr ng-repeat="info in displayCollection"> <td>{{info.threadId}}</td> <td>{{info.threadName}}</td> <td>{{getStateTip(info)}}</td> <td>{{info.waitedCount}}</td> <td>{{info.blockedCount}}</td> <td> <ul> <li ng-repeat="trace in info.stackTrace"> {{formatTrace(trace)}} </li> </ul> </td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="close()">close</button> </div></script><div class="perf-list"><div class="row"><div class="panel"><div class="title" style="width:50px">线程 <a href="" ng-click="vm.collapse()"><i ng-class="{false:\'fa-angle-double-down\',true:\'fa-angle-double-up\'}[vm.showDiagram]" class="fa"></i></a></div><div class="thread-summary"><span class="summary-info">活动线程：{{vm.currentThreadStats.currentThreadCount}}</span> <span class="summary-info">守护线程：{{vm.currentThreadStats.daemonThreadCount}}</span> <span class="summary-info">启动总数：{{vm.currentThreadStats.totalStartedThreadCount}}</span> <span class="summary-info">峰值：{{vm.currentThreadStats.peakThreadCount}}</span></div><div class="content" ng-show="vm.showDiagram"><nvd3 api="vm.threadApi" options="vm.threadOptions" data="vm.threadData"></nvd3></div></div></div><div class="row"><uib-tabset active="activeForm"><uib-tab index="0" heading="线程"><div class="dump-container panel"><div class="row"><div class="col-md-6"><div><div class="input-group"><div class="input-group-addon btn btn-primary active" ng-click="vm.refreshThreads()"><i class="fa fa-refresh"></i></div><input ng-model="vm.searchName" placeholder="thread name" class="input-sm form-control" type="search"></div></div><div class="p-left ng-style:vm.fixedContainer"><table st-table="displayCollection" class="table" st-safe-src="vm.threads"><thead><tr><th class="sorting" st-sort="cpuTime" width="25%">cpu time</th><th class="sorting" st-sort="state" width="15%">state</th><th class="sorting" st-sort="name" width="60%">thread name</th></tr></thead><tbody><tr ng-class="{\'selected\':t.selected}" ng-click="vm.select(t)" ng-repeat="t in displayCollection | filter:vm.searchName"><td><uib-progressbar type="success" value="barVal=(t.cpuTime*100/vm.totalCpu).toFixed(2)"><b class="progress-val">{{t.cpuTime/1000000|number}}ms-{{barVal}}%</b></uib-progressbar></td><td class="{{t.state}}">{{t.state}}</td><td>{{t.name}}</td></tr></tbody></table></div></div><div class="p-right col-md-6 ng-style:vm.fixedContainer" ng-show="vm.selectedItem"><div>名称：{{vm.threadInfo.threadName}}</div><div>CPU时间：{{vm.selectedItem.cpuTime|number}} ns</div><div>状态：{{(vm.threadInfo.lockName?vm.threadInfo.lockName+"上的":"") + vm.threadInfo.threadState}}</div><div>总阻止数：{{vm.threadInfo.blockedCount}} ,总等待数：{{vm.threadInfo.waitedCount}}</div><div>堆栈跟踪：</div><ul><li ng-class="{\'high-light\':vm.needHighlight(trace.declaringClass+trace.methodName+trace.methodDetail)}" ng-repeat="trace in vm.threadInfo.stackTrace">{{vm.formatTrace(trace)}}</li></ul></div></div></div></uib-tab><button class="btn btn-primary float-right" ng-click="vm.threadDump(true)">检测死锁</button> <button class="btn btn-primary float-right dump-btn" ng-click="vm.threadDump()">Thread Dump</button><div uib-tooltip="设置thread dump获取调用堆栈的最大深度" class="setter float-right input-group"><span class="input-group-addon">max depth</span> <input ng-model="vm.maxDepth" type="text" class="form-control"></div><div uib-tooltip="设置堆栈中需加亮行包含的词语(空格分隔)" class="setter float-right input-group"><span class="input-group-addon">Highlight words</span> <input ng-model="vm.highlightWords" type="text" class="highlight-words form-control"></div><div class="float-right cpu-time"><label>Total Cpu Time: {{vm.totalCpu/1000000|number}}ms</label></div></uib-tabset></div></div>'),t.put("app/components/navbar/navbar.html",'<script type="text/ng-template" id="viserversmodal.html"><div class="modal-header"> <h3 class="modal-title">Set api server ({{vm.hostIp}} <span ng-show="vm.selectedRow"> -> {{vm.selectedRow.ip}}</span>)</h3> </div> <div class="modal-body"> <div ng-show="!vm.hasContent"> Loading server list<i class="fa fa-spinner fa-pulse fa-fw"></i> </div> <div ng-show="vm.hasContent"> <div class="widget-header"> <span class="title">Servers({{vm.servers.length}})</span> <div class="input-group"> <select class="form-control" ng-model="vm.selectedIdc" ng-options="v for v in vm.idcs"></select> </div> <div class="input-group"> <div class="input-group-addon"><i class="fa fa-search"></i> </div> <input ng-model="query" placeholder="key word" class="input-sm form-control" type="search" /> </div> </div> <table st-table="displayCollection" st-safe-src="vm.servers" class="fixed-header table table-striped" search-watch-model="query"> <thead> <tr class="widget-header"> <th class="sorting" st-sort="idc">Idc</th> <th class="sorting" st-sort="name">Name</th> <th class="sorting" st-sort="ip">IP</th> </tr> </thead> <tbody> <tr ng-repeat="server in displayCollection | filter:vm.idcFilter" st-select-row="server" ng-dblclick="ok()" ng-click="vm.selectedRow = server"> <td>{{server.idc}}</td> <td>{{server.name}}</td> <td>{{server.ip}}</td> </tr> </tbody> </table> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> </div></script><nav class="navbar navbar-static-top navbar-inverse"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand"><i class="fa fa-eye"></i> <span class="app-name" ng-show="vm.appName && vm.appName!=\'N/A\'">{{vm.appChineseName}} ({{vm.appName}})</span> <span class="app-name" ng-show="!vm.appName || vm.appName==\'N/A\'">{{vm.appid}} -- {{vm.hostName}}/{{vm.hostIp}}</span></a></div><div class="navbar-right"><div class="navbar-button mail-button" uib-dropdown=""><a href="#" uib-dropdown-toggle=""><i class="ace-icon fa fa-question"></i></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="split-button"><li role="menuitem" ng-repeat="(n,l) in vm.links"><a target="blank" href="{{l}}">{{n}}</a></li></ul></div><div class="navbar-button user-button" uib-dropdown=""><span class="user-info">Welcome,{{vm.loginUser}}</span> <a href="#" uib-dropdown-toggle=""><span class="caret"></span></a><ul uib-dropdown-menu="" role="menu" aria-labelledby="split-button"><li role="menuitem"><a href="logout"><i class="fa fa-power-off"></i> log out</a></li></ul></div></div></div><div class="breadcrumbs"><div class="sysinfo">Host: <span class="link" ng-click="vm.changeServer()">{{vm.hostName}}/{{vm.hostIp}}</span>&nbsp;/</div><ul class="breadcrumb"><li ng-class="{\'link\':k==0 && v.state!=\'empty\'}" ui-sref="{{k==0 && v.state!=\'empty\'?v.state:\'.\'}}" ng-repeat="(k,v) in breadcrumbs">{{v.name}}</li></ul><div class="version">vi version: 0.9.3</div></div></nav>'),t.put("app/components/sidebar/sidebar.html",'<div class="sidebar" ng-class="{true:\'barcollapse\'}[isCollapse]"><div class="nav-wrap-up pos-rel"><div class="nav-wrap"><div style="position: relative; top: 0px; transition-property: top; transition-duration: 0.15s;"><div class="shortcuts"><div class="sidebar-shortcuts"><button class="btn btn-info"></button> <button class="btn btn-danger"></button></div><div class="sidebar-shortcuts-large"><button class="btn btn-info"><i class="fa fa-pencil"></i></button> <button class="btn btn-danger"><i class="fa fa-cogs"></i></button></div></div><scrollbar ng-style="{maxHeight:vm.menuMaxHeight}"><ul class="nav nav-list"><li ng-mouseenter="vm.hoverMenu(m,$index)" ng-repeat="m in menus"><div ui-sref="{{m.state}}" ng-class="{\'sele-menu\': m.selected,\'hover\':hover}"><a href=""><i class="menu-icon fa {{m.icon}}"></i> <span class="menu-text">{{m.name}}</span></a></div></li></ul></scrollbar></div></div></div><div class="sidebar-toggle sidebar-collapse"><a href="" ng-click="collapse()"><i ng-class="{false:\'fa-angle-double-left\',true:\'fa-angle-double-right\'}[isCollapse]" class="fa"></i></a></div><ul ng-style="{top:vm.subMenuTop,left:vm.subMenuLeft,maxHeight:vm.subMenuHeight}" scrollbar="" ng-if="vm.currentHover.submenu" class="submenu" ng-mouseleave="vm.currentHover=null"><div class="submenu_title" ui-sref="{{vm.currentHover.state}}"><a href=""><span>{{vm.currentHover.name}}</span></a></div><li ng-repeat="sm in vm.currentHover.submenu" ui-sref="{{sm.state}}" ng-click="selemenu(vm.currentHover)"><a href=""><i class="menu-icon fa fa-caret-right"></i> <span>{{sm.name}}</span> <span>{{sm.description}}</span></a></li></ul></div>'),t.put("app/dashboard/trace/trace.html",'<style>\r\n    .main {\r\n    width: 100%;\r\n    margin-left:-10px;\r\n    text-align: center;\r\n    font-size: 13px;\r\n    padding-top: 0px;\r\n    }\r\n    .section {\r\n    border-top: 2px groove #AAAAAA;\r\n    padding-bottom: 10px;\r\n    padding-top: 10px;\r\n    }\r\n    .row>.title {\r\n    text-align: right;\r\n    font-weight: bolder;\r\n    padding-left: 0px;\r\n    padding-right: 0px;\r\n    }\r\n    .row>.title>span {\r\n     width:100px;\r\n    }\r\n    .row>.content {\r\n    text-align: left;\r\n    padding-right: 0px;\r\n    word-break:break-all;\r\n    }\r\n</style><div class="main"><div class="row"><h3>点火详情</h3></div><svg style="width:100%;height:80px"><svg id="test-chart" style="width:100%;height:80px"><div class="row"><div class="col-md-2 title"><span uib-tooltip="开始时间" tooltip-placement="bottom-right">Start Time:</span></div><div class="col-md-10 content">{{vm.data["startTime"]}}</div></div><div class="row"><div class="col-md-2 title"><span uib-tooltip="状态" tooltip-placement="bottom-right">Status:</span></div><div class="col-md-10 content {{vm.statusClass}}">{{vm.data["status"]}}</div></div><div class="row"><div class="col-md-2 title"><span uib-tooltip="耗时(毫秒)" tooltip-placement="bottom-right">Cost Time(ms):</span></div><div class="col-md-10 content">{{vm.data["cost"]}}</div></div><div class="row"><div class="col-md-2 title"><span uib-tooltip="详情" tooltip-placement="bottom-right">Detail:</span></div><div class="col-md-10 content"><div ng-repeat="m in vm.data[\'message\'] track by $index" class="{{vm.colorMsg(m)}}"><span ng-bind-html="vm.formatMsg(m)"></span></div></div></div></svg></svg></div>')}]);
//# sourceMappingURL=../maps/scripts/app-21f4a8581d.js.map
